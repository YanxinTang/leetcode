# 32. 最长有效括号

## 动态规划

用 `dp[i]` 表示 `[0, i]` （包含第 i 个字符的） 内最长有效字符的长度

下面进行分类讨论

  1. `dp[i] === '('` 时：

      必定不是有效括号，值应该是0

  2. `dp[i] === ')'` 时：有效长度和 `s[i-1]` 相关

      1. `s[i-1] === '('` 时：

          `s[i]` 和 `s[i-1]` 组成一对括号，因此 `dp[i] = dp[i-2]+2`

      2. `s[i-1] === ')'` 时：

          从 `s[i - dp[i-1]]` 到 `s[i-1]` 会组成有效括号，因此 `s[i]` 应该和 `s[i - dp[i-1] - 1]` 这个字符去匹配是否能组成有效括号。若可以，再加上前一个字符的最长有效括号长度即可，即 `dp[i] = dp[i - dp[i-1] - 2] + dp[i-1] + 2`
